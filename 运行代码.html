
<html>
	<head>
		<meta charset="UTF-8" />
<title>运行代码</title>
	</head>
<body onload=localStorage.clear()>
<div style=float:left>HTML</div><br><textarea oninput=run1() id=html></textarea><br>
<div style=float:left >JavaScript</div><br>
<textarea oninput=run1() id=js></textarea><br>
<div style=float:left>CSS</div><br>
<textarea oninput=run1() id=css></textarea>
<br>
<button onclick=run() id=run>运行代码</button>&nbsp;&nbsp;自动执行<input type=checkbox checked=checked onclick=i()>
&nbsp;&nbsp;<button onclick=dom("result").srcdoc="";dom("log0").srcdoc="";>紧急停止运行</button>
<br>
<div style=float:left>运行结果:</div><br><br>
<iframe id=result name=result></iframe>
<br>
<div style=float:left>console日志:</div><br><br>
<iframe id=log0 ></iframe>
<script>
//自定义函数dom
function dom(x)
{
var dom=document.getElementById(x)
return dom
}
window.onbeforeunload = function(event) {
 event.returnValue = "退出代码将不会保存，是否继续";
};
localStorage.setItem("alertmaybesomeoneelsewillnotuseit", JSON.stringify([]))
function run()
{
localStorage.setItem("alertmaybesomeoneelsewillnotuseit", JSON.stringify([]))
localStorage.readJavaScriptmaybesomeoneelsewillnotuseit=dom("js").value
//document.write(localStorage.maybesomeoneelsewillnotuseit)
localStorage.readHTMLmaybesomeoneelsewillnotuseit=dom("html").value
dom("log0").srcdoc=decodeURIComponent("%3Cscript%3E%0Avar%20t%3D0%0AsetInterval(function()%7B%0Awhile(t%3CJSON.parse(localStorage.getItem(%22lmaybesomeoneelsewillnotuseit%22)).length)%0A%7B%0At%2B%2B%0Adocument.write(JSON.parse(localStorage.getItem(%22lmaybesomeoneelsewillnotuseit%22))%5Bt-1%5D)%0A%20%7D%0A%0A%7D%2C0)%0A%0A%3C%2Fscript%3E")
dom("result").srcdoc="<style>"+dom("css").value+"</st"+"yle><script>"+decodeURIComponent("var%20umaybesomeoneelsewillnotuseit%3D0%0A%2F%2F%E5%AD%97%E7%AC%A6%E4%B8%B2%E8%BD%AC%E5%AD%97%E7%AC%A6%E5%AE%9E%E4%BD%93%0A%0Afunction%20emaybesomeoneelsewillnotuseit(str%2Cradix)%7B%0A%0A%20%20str%3DString(str)%0Alet%20arr%3D%5B%5D%0A%0A%20%20%2F%2F%E8%BF%94%E5%9B%9E%E7%9A%84%E5%AD%97%E7%AC%A6%E5%AE%9E%E4%BD%93%E9%BB%98%E8%AE%A410%E8%BF%9B%E5%88%B6%EF%BC%8C%E4%B9%9F%E5%8F%AF%E4%BB%A5%E9%80%89%E6%8B%A916%E8%BF%9B%E5%88%B6%0A%0A%20%20radix%3Dradix%7C%7C0%0A%0A%20%20for(let%20i%3D0%3Bi%3Cstr.length%3Bi%2B%2B)%7B%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%0A%20%20%20%20arr.push((!radix%3F'%26%23'%2Bstr.charCodeAt(i)%3A'%26%23x'%2Bstr.charCodeAt(i).toString(16))%2B'%3B')%0A%0A%20%20%7D%0A%0A%20%20let%20tmp%3Darr.join('')%0A%0A%20%20return%20tmp%0A%0A%7D%0A%0Avar%20console%3Dnew%20Object()%0A%0AlocalStorage.setItem(%22lmaybesomeoneelsewillnotuseit%22%2C%20JSON.stringify(%5B%5D))%0A%0Aconsole.log%3Dfunction(msg)%0A%0A%7B%0A%0Aumaybesomeoneelsewillnotuseit%2B%2B%0A%0Avar%20arr%20%3D%20JSON.parse(localStorage.getItem(%22lmaybesomeoneelsewillnotuseit%22))%0A%0Aarr.push(%22%3Cdiv%20style%3Dbackground%3A%23E8E8E8%3E%22%2Bumaybesomeoneelsewillnotuseit%2B%22.%20log%3A%22%2Bemaybesomeoneelsewillnotuseit(msg)%2B%22%3C%2Fdiv%3E%22)%0A%0AlocalStorage.setItem(%22lmaybesomeoneelsewillnotuseit%22%2C%20JSON.stringify(arr))%0A%0A%7D%0A%0Aconsole.error%3Dfunction(msg)%0A%0A%7B%0A%0Aumaybesomeoneelsewillnotuseit%2B%2B%0A%0Avar%20arr%20%3D%20JSON.parse(localStorage.getItem(%22lmaybesomeoneelsewillnotuseit%22))%0A%0Aarr.push(%22%3Cdiv%20style%3Dbackground%3A%23FFD7D7%3E%22%2Bumaybesomeoneelsewillnotuseit%2B%22.%20error%3A%22%2Bemaybesomeoneelsewillnotuseit(msg)%2B%22%3C%2Fdiv%3E%22)%0A%0AlocalStorage.setItem(%22lmaybesomeoneelsewillnotuseit%22%2C%20JSON.stringify(arr))%0A%0A%7D%0A%09%09%09%09%09%09%09%09%20console.warn%3Dfunction(msg)%0A%0A%7B%0A%0Aumaybesomeoneelsewillnotuseit%2B%2B%0A%0Avar%20arr%20%3D%20JSON.parse(localStorage.getItem(%22lmaybesomeoneelsewillnotuseit%22))%0A%0Aarr.push(%22%3Cdiv%20style%3Dbackground%3A%23FFFCEA%3E%22%2Bumaybesomeoneelsewillnotuseit%2B%22.%20warn%3A%22%2Bemaybesomeoneelsewillnotuseit(msg)%2B%22%3C%2Fdiv%3E%22)%0A%0AlocalStorage.setItem(%22lmaybesomeoneelsewillnotuseit%22%2C%20JSON.stringify(arr))%0A%0A%7D%0A%0Awindow.onerror%20%3D%20handleError%0A%0Afunction%20handleError(msg%2Curl%2Cl)%0A%0A%7B%0Aumaybesomeoneelsewillnotuseit%2B%2B%0Avar%20txt%3D%22JavaScript%E8%BF%90%E8%A1%8C%E5%BC%82%E5%B8%B8%22%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80txt%2B%3D%22%3Cbr%3EError%3A%20%22%20%2B%20msg%20%2B%20%22%3Cbr%3E%22%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80txt%2B%3D%22URL%3A%20%22%20%2B%20url%20%2B%20%22%3Cbr%3E%22%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80txt%2B%3D%22at%3A%3Cbr%3E%22%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80txt%2B%3D%22%26nbsp%3B%26nbsp%3B%26nbsp%3BJavaScript%E8%BE%93%E5%85%A5%E6%A1%86%26nbsp%3BLine%3A%22%2B%20(l-98-localStorage.readHTMLmaybesomeoneelsewillnotuseit.split(%22%5Cn%22).length)%2B%22%3Cbr%3E%22%0A%20%20%20%20%20%20txt%2B%3D%22code%3A%3Cspan%20style%3Dbackground%3Ayellow%3E%22%2Bemaybesomeoneelsewillnotuseit(localStorage.readJavaScriptmaybesomeoneelsewillnotuseit.split(%22%5Cn%22)%5Bl-99-localStorage.readHTMLmaybesomeoneelsewillnotuseit.split(%22%5Cn%22).length%5D)%2B%22%3C%2Fspan%3E%3Cbr%3E%22%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80txt%2B%3D%22or%3A%3Cbr%3E%26nbsp%3B%26nbsp%3B%26nbsp%3BHTML%E8%BE%93%E5%85%A5%E6%A1%86%26nbsp%3BLine%3A%22%2B%20(l-99)%2B%22%3Cbr%3E%22%0A%0A%E3%80%80%E3%80%80%E3%80%80%E3%80%80txt%2B%3D%22code%3A%3Cspan%20style%3Dbackground%3Ayellow%3E%22%2Bemaybesomeoneelsewillnotuseit(localStorage.readHTMLmaybesomeoneelsewillnotuseit.split(%22%5Cn%22)%5Bl-100%5D)%2B%22%3C%2Fspan%3E%22%0Avar%20arr%20%3D%20JSON.parse(localStorage.getItem(%22lmaybesomeoneelsewillnotuseit%22))%0A%0Aarr.push(%22%3Cdiv%20style%3Dbackground%3A%23FFD7D7%3E%22%2Bumaybesomeoneelsewillnotuseit%2B%22.%20error%3A%22%2Btxt%2B%22%3C%2Fdiv%3E%22)%0A%0AlocalStorage.setItem(%22lmaybesomeoneelsewillnotuseit%22%2C%20JSON.stringify(arr))%0Areturn%20true%0A%7D%20%0AlocalStorage.setItem(%22alertmaybesomeoneelsewillnotuseit%22%2C%20JSON.stringify(%5B%5D))%0Aalert%3Dfunction(msg)%7Bvar%20arr%20%3D%20JSON.parse(localStorage.getItem(%22alertmaybesomeoneelsewillnotuseit%22))%0Aarr.push(msg)%0AlocalStorage.setItem(%22alertmaybesomeoneelsewillnotuseit%22%2C%20JSON.stringify(arr))%0A%7D")+"</sc"+"ript>"+dom("html").value+"<script>"+dom("js").value+"</sc"+"ript>"

console.log(localStorage.lmaybesomeoneelsewillnotuseit)
}
var run1=function()
{
run()
}
var t=0
function i()
{
t++
if(t%2!=0)
{
run1=function(){}
}
else
{run1=function()
{
run()
}
}
}
//alert处理
setInterval(function(){
var alertarr=JSON.parse(localStorage.getItem("alertmaybesomeoneelsewillnotuseit"))
if(alertarr.length>0)
{
if(!confirm("[alert]\n点击取消强制停止运行\n----------------\n"+alertarr[0])){
dom("result").srcdoc="";
dom("log0").srcdoc="";
localStorage.clear();
alertarr=[];
alert("已停止运行")
}
alertarr.shift()
localStorage.setItem("alertmaybesomeoneelsewillnotuseit", JSON.stringify(alertarr))
}
},1)
</script>
<style>
textarea,iframe{width:75%;
height:22%;
border:solid 2px black;
font-size:20px;
}
</style>
</body>
</html>
